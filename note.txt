lockbox/lockbox/
‚îú‚îÄ‚îÄ app/          ‚Üê On garde (√©crans)
‚îú‚îÄ‚îÄ assets/       ‚Üê On garde (images)
‚îú‚îÄ‚îÄ src/          ‚Üê Notre code (que tu as cr√©√©)
‚îú‚îÄ‚îÄ node_modules/ ‚Üê On garde (d√©pendances)
‚îú‚îÄ‚îÄ package.json  ‚Üê On garde
‚îî‚îÄ‚îÄ ...

fichier lockbox/
‚îú‚îÄ app/
‚îÇ  ‚îú‚îÄ lock.tsx
‚îÇ  ‚îú‚îÄ index.tsx
‚îÇ  ‚îú‚îÄ import.tsx
‚îÇ  ‚îú‚îÄ view.tsx
‚îÇ  ‚îú‚îÄ settings.tsx
‚îú‚îÄ src/
‚îÇ  ‚îú‚îÄ types.ts
‚îÇ  ‚îú‚îÄ db.ts
‚îÇ  ‚îú‚îÄ crypto.ts
‚îÇ  ‚îú‚îÄ auth.ts
‚îÇ  ‚îú‚îÄ files.ts


fichie : 
----------------------------- Types.ts ------------------------------

MIME : le type du contenu (ex: application/pdf, image/png) ‚Äî utile pour choisir le viewer.
URI : ‚Äúadresse‚Äù d‚Äôun fichier/app resource sur l‚Äôappareil (ex: file:///...).
Hash du PIN : on ne stocke pas le PIN, mais son hash (ex: SHA-256) dans SecureStore.
Nonce / IV : valeur al√©atoire et unique par chiffrement. Avec AEAD (XChaCha20-Poly1305 / AES-GCM), c‚Äôest indispensable pour la s√©curit√©. On la stocke avec les m√©tadonn√©es pour pouvoir d√©chiffrer.
category? : champ optionnel (pas oblig√© de le renseigner).

üìã R√©sum√© ultra-rapide de src/types.ts

DocumentEntry : Un document en DB (id, title, filename chiffr√©, mime, nonce, cat√©gorie, date, taille)
CreateDocumentParams : Param√®tres pour cr√©er un nouveau document en DB
AuthConfig : Config s√©curit√© (hash PIN, biom√©trie on/off, d√©lai auto-lock)
EncryptionResult : R√©sultat de chiffrement (data chiffr√©e + nonce)
ImportResult : R√©sultat d'import (success, documentId, error √©ventuelle)
FileToImport : Info fichier √† importer (uri, nom, mime, taille)
DecryptionResult : Fichier d√©chiffr√© temporaire (uri temp + mime)
BackupData : Structure d'export (version, timestamp, entries, fichiers en base64)
AppLockState : √âtat de l'app (locked | unlocked | first-launch)
DOCUMENT_CATEGORIES : Liste des cat√©gories (Personnel, Travail, M√©dical, Financier, Juridique, Autre)


------------------------ db.ts ---------------------------------------
!!!!!!
db = cl√© USB (branch√©e ou non).
initDatabase() = tu la branches.
ensureDbInitialized() = tu v√©rifies qu‚Äôelle est branch√©e avant de lire/√©crire.
closeDatabase() = tu l‚Äô√©jectes proprement avant d‚Äô√©teindre ton ordi.

FONCTION 
initDatabase() ‚Üí cr√©e/ouvre la base SQLite et la table entries si absente.

checkDb() ‚Üí v√©rifie que la base est bien initialis√©e avant utilisation.

insertDocument() ‚Üí ajoute un nouveau document dans la table.

getAllDocuments() ‚Üí r√©cup√®re tous les documents tri√©s par date.

getDocumentById() ‚Üí obtient un document sp√©cifique via son ID.

getDocumentsByCategory() ‚Üí liste les documents d‚Äôune cat√©gorie donn√©e.

updateDocumentTitle() ‚Üí modifie le titre d‚Äôun document existant.

updateDocumentCategory() ‚Üí modifie ou supprime la cat√©gorie d‚Äôun document.

deleteDocument() ‚Üí supprime un document par ID.

searchDocuments() ‚Üí cherche des documents par mot-cl√© dans le titre.

getDocumentCount() ‚Üí retourne le nombre total de documents stock√©s.

clearDatabase() ‚Üí vide compl√®tement la table des documents.

closeDatabase() ‚Üí ferme proprement la connexion √† la base.




--------------------------crypto.ts-------------------------------------
G√®re tout ce qui touche au chiffrement et √† la cl√© secr√®te dans de l'appli.
DONC : transforme des fichiers ‚Äúnormaux‚Äù ‚Üí en donn√©es illisibles, puis il permet de les d√©chiffrer plus tard avec la bonne cl√©.

initCrypto() : Initialise la librairie libsodium(le moteur de chiffrement utilis√©). 
‚Üí retourne : rien (void)

ensureMasterKey() : G√©n√®re ou r√©cup√®re la cl√© ma√Ætre (32 bytes, SecureStore)
‚Üí retourne : la cl√© ma√Ætre (Uint8Array)


encryptData() : Chiffre des donn√©es ‚Üí renvoie { encryptedData, nonce }   ( nonce ‚Üí une valeur al√©atoire utilis√©e une fois pour ce chiffrement pr√©cis, pas secret et stoket dans un fichier )
                                                                         ( encryptedData ‚Üí les donn√©es chiffr√©es (illisibles))
‚Üí retourne : un objet { encryptedData: Uint8Array, nonce: string }
AEAD = Authenticated Encryption with Associated Data 
‚Üí Chiffre les donn√©es ET v√©rifie leur int√©grit√©. 
‚Üí Si quelqu‚Äôun modifie le fichier chiffr√© 
‚Üí le d√©chiffrement √©choue. 
‚Üí Utilis√© dans LockBox via XChaCha20-Poly1305 (libsodium).

decryptData(encryptedData, nonce) : D√©chiffre les donn√©es gr√¢ce √† la cl√© et au nonce -> fichier original
‚Üí retourne : les donn√©es d√©chiffr√©es (Uint8Array ou texte original)

clearMasterKeyCache() : Efface la cl√© de la m√©moire RAM quand l‚Äôapp se verrouille
‚Üí retourne : rien (void)

deleteMasterKey() : Supprime d√©finitivement la cl√© (reset total) -> tout les fichier d√©finitivement illisibles
‚Üí retourne : rien (void)

hasMasterKey() : V√©rifie si une cl√© ma√Ætre existe d√©j√† (si elle est dans ke SecureStore)  -> true ou false
‚Üí retourne : un bool√©en (boolean)

generateEncryptedFilename() : Cr√©e un nom de fichier al√©atoire f_<id>.enc
‚Üí retourne : une cha√Æne (string)

hashPassword() : Calcule le hash SHA-256 d‚Äôun PIN
                On ne stocke jamais un mot de passe ni un PIN en clair.
                Au lieu de √ßa, on stocke le hash :
                SHA256("1234") = "03ac674216f3e15c761ee1a5e255f067..."
‚Üí retourne : le hash (string)

verifyPassword(pin, hash) : Compare un PIN saisi √† son hash enregistr√©
hash("1234") === pinHash ? OK : refus√©
‚Üí retourne : true si le PIN est correct, false sinon